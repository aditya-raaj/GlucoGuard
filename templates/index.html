<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GlucoGuard - Diabetes Risk Assessment</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
        }

        .app-container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 24px;
            box-shadow: 
                0 32px 64px rgba(0, 0, 0, 0.12),
                0 0 0 1px rgba(255, 255, 255, 0.05);
            overflow: hidden;
            backdrop-filter: blur(20px);
        }

        .app-header {
            background: linear-gradient(135deg, #059669 0%, #10b981 50%, #34d399 100%);
            padding: 40px 30px;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .app-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Ccircle cx='30' cy='30' r='4'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            33% { transform: translateY(-10px) rotate(1deg); }
            66% { transform: translateY(5px) rotate(-1deg); }
        }

        .app-header h1 {
            font-size: 2.75rem;
            font-weight: 800;
            margin-bottom: 12px;
            position: relative;
            z-index: 1;
            letter-spacing: -0.025em;
        }

        .app-header p {
            font-size: 1.2rem;
            opacity: 0.95;
            position: relative;
            z-index: 1;
            font-weight: 400;
        }

        .form-container {
            padding: 50px 40px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 35px;
            margin-bottom: 40px;
        }

        .input-card {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 16px;
            padding: 24px;
            position: relative;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .input-card:hover {
            border-color: #10b981;
            transform: translateY(-2px);
            box-shadow: 0 12px 28px rgba(16, 185, 129, 0.15);
        }

        .input-card.focused {
            border-color: #059669;
            background: white;
            box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.1);
        }

        .input-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .input-label {
            font-weight: 600;
            color: #1e293b;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .input-label i {
            color: #10b981;
            font-size: 1.1rem;
        }

        .normal-range {
            background: #ecfdf5;
            color: #047857;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            border: 1px solid #a7f3d0;
        }

        .parameter-info {
            margin: 12px 0 16px 0;
            padding: 12px;
            background: #f1f5f9;
            border-radius: 10px;
            border-left: 4px solid #3b82f6;
        }

        .parameter-info p {
            font-size: 0.9rem;
            color: #475569;
            line-height: 1.5;
            margin: 0;
        }

        .input-wrapper {
            position: relative;
        }

        .input-wrapper input {
            width: 100%;
            padding: 16px 20px 16px 50px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            background: white;
            font-weight: 500;
        }

        .input-wrapper input:focus {
            outline: none;
            border-color: #10b981;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }

        .input-wrapper input:valid {
            border-color: #059669;
        }

        .input-wrapper i {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: #10b981;
            font-size: 1.2rem;
            z-index: 2;
        }

        .gender-card {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 16px;
            padding: 24px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .gender-card:hover {
            border-color: #10b981;
            transform: translateY(-2px);
            box-shadow: 0 12px 28px rgba(16, 185, 129, 0.15);
        }

        .gender-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-top: 16px;
        }

        .gender-option {
            position: relative;
        }

        .gender-option input[type="radio"] {
            display: none;
        }

        .gender-option label {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            padding: 16px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            font-weight: 600;
            font-size: 1rem;
        }

        .gender-option input[type="radio"]:checked + label {
            border-color: #10b981;
            background: #ecfdf5;
            color: #047857;
            transform: scale(1.02);
        }

        .gender-option label i {
            font-size: 1.3rem;
        }

        .submit-button {
            width: 100%;
            padding: 20px;
            background: linear-gradient(135deg, #059669 0%, #10b981 50%, #34d399 100%);
            color: white;
            border: none;
            border-radius: 16px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3);
        }

        .submit-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(16, 185, 129, 0.4);
        }

        .submit-button:active {
            transform: translateY(-1px);
        }

        .submit-button.loading {
            opacity: 0.8;
            cursor: not-allowed;
        }

        .loading-spinner {
            display: none;
            margin-right: 12px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .results-card {
            margin-top: 40px;
            padding: 30px;
            border-radius: 20px;
            display: none;
            animation: slideUp 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes slideUp {
            from { 
                opacity: 0; 
                transform: translateY(30px) scale(0.95); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
            }
        }

        .results-low {
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border: 2px solid #a7f3d0;
            color: #047857;
        }

        .results-moderate {
            background: linear-gradient(135deg, #fefce8 0%, #fef3c7 100%);
            border: 2px solid #fde68a;
            color: #92400e;
        }

        .results-high {
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
            border: 2px solid #fecaca;
            color: #991b1b;
        }

        .results-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
        }

        .results-header i {
            font-size: 2rem;
        }

        .results-header h3 {
            font-size: 1.75rem;
            font-weight: 800;
        }

        .results-content {
            margin-bottom: 24px;
            line-height: 1.7;
        }

        .probability-section {
            margin-top: 30px;
        }

        .probability-section h4 {
            margin-bottom: 20px;
            font-weight: 700;
            font-size: 1.1rem;
        }

        .probability-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            padding: 16px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }

        .probability-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 4px;
            margin: 8px 0;
            overflow: hidden;
        }

        .probability-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .error-card {
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
            border: 2px solid #fecaca;
            color: #991b1b;
            padding: 24px;
            border-radius: 16px;
            margin-top: 30px;
            display: none;
        }

        .disclaimer-card {
            margin-top: 40px;
            padding: 24px;
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
            border-left: 4px solid #f59e0b;
            border-radius: 12px;
            font-size: 0.95rem;
            color: #92400e;
            line-height: 1.6;
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
                gap: 25px;
            }
            
            .app-header h1 {
                font-size: 2.2rem;
            }
            
            .app-container {
                margin: 10px;
                border-radius: 20px;
            }
            
            .form-container {
                padding: 30px 25px;
            }

            .input-card {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="app-header">
            <h1><i class="fas fa-heartbeat"></i> GlucoGuard</h1>
            <p>Advanced AI-Powered Diabetes Risk Assessment</p>
        </div>

        <div class="form-container">
            <form id="predictionForm">
                <div class="form-grid">
                    <div class="gender-card">
                        <div class="input-header">
                            <div class="input-label">
                                <i class="fas fa-user"></i>
                                Gender
                            </div>
                            <div class="normal-range">Biological Sex</div>
                        </div>
                        <div class="parameter-info">
                            <p>Gender affects diabetes risk due to hormonal differences and metabolic variations between males and females.</p>
                        </div>
                        <div class="gender-options">
                            <div class="gender-option">
                                <input type="radio" id="female" name="Gender" value="0" required>
                                <label for="female">
                                    <i class="fas fa-venus"></i>
                                    Female
                                </label>
                            </div>
                            <div class="gender-option">
                                <input type="radio" id="male" name="Gender" value="1" required>
                                <label for="male">
                                    <i class="fas fa-mars"></i>
                                    Male
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="input-card">
                        <div class="input-header">
                            <div class="input-label">
                                <i class="fas fa-calendar-alt"></i>
                                Age
                            </div>
                            <div class="normal-range">Any Age</div>
                        </div>
                        <div class="parameter-info">
                            <p>Age is a major risk factor - diabetes risk increases significantly after age 45, with higher prevalence in older adults.</p>
                        </div>
                        <div class="input-wrapper">
                            <i class="fas fa-birthday-cake"></i>
                            <input type="number" id="age" name="Age" min="1" max="120" placeholder="Enter age in years" required>
                        </div>
                    </div>

                    <div class="input-card">
                        <div class="input-header">
                            <div class="input-label">
                                <i class="fas fa-vial"></i>
                                Urea Level
                            </div>
                            <div class="normal-range">15-45 mg/dL</div>
                        </div>
                        <div class="parameter-info">
                            <p>Blood urea nitrogen (BUN) indicates kidney function. High levels may suggest kidney damage, common in diabetes complications.</p>
                        </div>
                        <div class="input-wrapper">
                            <i class="fas fa-flask"></i>
                            <input type="number" id="urea" name="Urea" min="0" max="50" step="0.1" placeholder="mg/dL" required>
                        </div>
                    </div>

                    <div class="input-card">
                        <div class="input-header">
                            <div class="input-label">
                                <i class="fas fa-microscope"></i>
                                Creatinine Level
                            </div>
                            <div class="normal-range">0.6-1.2 mg/dL</div>
                        </div>
                        <div class="parameter-info">
                            <p>Serum creatinine measures kidney function. Normal: Men 0.7-1.3, Women 0.6-1.1 mg/dL. Elevated levels indicate kidney problems.</p>
                        </div>
                        <div class="input-wrapper">
                            <i class="fas fa-atom"></i>
                            <input type="number" id="creatinine" name="Creatinine" min="0" max="1000" step="0.01" placeholder="mg/dL" required>
                        </div>
                    </div>


                    <div class="input-card">
                        <div class="input-header">
                            <div class="input-label">
                                <i class="fas fa-chart-line"></i>
                                HbA1c Level
                            </div>
                            <div class="normal-range">4.0-5.6%</div>
                        </div>
                        <div class="parameter-info">
                            <p>Hemoglobin A1c reflects average blood sugar over 2-3 months. Normal &lt;5.7%, Pre-diabetes 5.7-6.4%, Diabetes ≥6.5%.</p>
                        </div>
                        <div class="input-wrapper">
                            <i class="fas fa-percentage"></i>
                            <input type="number" id="hbA1c" name="HBA1C" min="0" max="50" step="0.1" placeholder="%" required>
                        </div>
                    </div>


                    <div class="input-card">
                        <div class="input-header">
                            <div class="input-label">
                                <i class="fas fa-heartbeat"></i>
                                Total Cholesterol
                            </div>
                            <div class="normal-range">&lt;200 mg/dL</div>
                        </div>
                        <div class="parameter-info">
                            <p>Total cholesterol: Desirable &lt;200, Borderline 200-239, High ≥240 mg/dL. High levels increase cardiovascular risk in diabetes.</p>
                        </div>
                        <div class="input-wrapper">
                            <i class="fas fa-heart"></i>
                            <input type="number" id="cholesterol" name="Cholesterol" min="0" max="50" step="0.1" placeholder="mg/dL" required>
                        </div>
                    </div>

                    <div class="input-card">
                        <div class="input-header">
                            <div class="input-label">
                                <i class="fas fa-water"></i>
                                Triglycerides
                            </div>
                            <div class="normal-range">&lt;150 mg/dL</div>
                        </div>
                        <div class="parameter-info">
                            <p>Triglycerides: Normal &lt;150, Borderline 150-199, High 200-499, Very high ≥500 mg/dL. Often elevated in diabetes.</p>
                        </div>
                        <div class="input-wrapper">
                            <i class="fas fa-tint"></i>
                            <input type="number" id="triglycerides" name="TG" min="0" max="50" step="0.1" placeholder="mg/dL" required>
                        </div>
                    </div>
                </div>




                    <div class="input-card">
                        <div class="input-header">
                            <div class="input-label">
                                <i class="fas fa-plus-circle"></i>
                                HDL (Good) Cholesterol
                            </div>
                            <div class="normal-range">&gt;40/50 mg/dL</div>
                        </div>
                        <div class="parameter-info">
                            <p>High-density lipoprotein (good cholesterol): Men &gt;40, Women &gt;50 mg/dL. Higher levels are protective against heart disease.</p>
                        </div>
                        <div class="input-wrapper">
                            <i class="fas fa-thumbs-up"></i>
                            <input type="number" id="hdl" name="HDL" min="0" max="100" step="0.1" placeholder="mg/dL" required>
                        </div>
                    </div>

                    <div class="input-card">
                        <div class="input-header">
                            <div class="input-label">
                                <i class="fas fa-minus-circle"></i>
                                LDL (Bad) Cholesterol
                            </div>
                            <div class="normal-range">&lt;100 mg/dL</div>
                        </div>
                        <div class="parameter-info">
                            <p>Low-density lipoprotein (bad cholesterol): Optimal &lt;100, Near optimal 100-129, High ≥160 mg/dL. Lower is better.</p>
                        </div>
                        <div class="input-wrapper">
                            <i class="fas fa-thumbs-down"></i>
                            <input type="number" id="ldl" name="LDL" min="0" max="100" step="0.1" placeholder="mg/dL" required>
                        </div>
                    </div>

                    <div class="input-card">
                        <div class="input-header">
                            <div class="input-label">
                                <i class="fas fa-exclamation-triangle"></i>
                                VLDL Cholesterol
                            </div>
                            <div class="normal-range">5-30 mg/dL</div>
                        </div>
                        <div class="parameter-info">
                            <p>Very low-density lipoprotein carries triglycerides. Normal range 5-30 mg/dL. Elevated levels contribute to atherosclerosis.</p>
                        </div>
                        <div class="input-wrapper">
                            <i class="fas fa-warning"></i>
                            <input type="number" id="vldl" name="VLDL" min="0" max="100" step="0.1" placeholder="mg/dL" required>
                        </div>
                    </div>

                    <div class="input-card">
                        <div class="input-header">
                            <div class="input-label">
                                <i class="fas fa-weight"></i>
                                BMI (Body Mass Index)
                            </div>
                            <div class="normal-range">18.5-24.9</div>
                        </div>
                        <div class="parameter-info">
                            <p>BMI categories: Underweight &lt;18.5, Normal 18.5-24.9, Overweight 25-29.9, Obese ≥30. Higher BMI increases diabetes risk.</p>
                        </div>
                        <div class="input-wrapper">
                            <i class="fas fa-calculator"></i>
                            <input type="number" id="bmi" name="BMI" min="10" max="60" step="0.1" placeholder="kg/m²" required>
                        </div>
                    </div>






                <button type="submit" class="submit-button">
                    <i class="fas fa-spinner loading-spinner"></i>
                    <span class="btn-text">
                        <i class="fas fa-brain"></i>
                        Analyze Health Profile
                    </span>
                </button>
            </form>

            <div class="results-card" id="resultContainer">
                <div class="results-header">
                    <i class="result-icon"></i>
                    <h3 class="result-title"></h3>
                </div>
                <div class="results-content"></div>
                <div class="probability-section">
                    <h4>Risk Analysis Breakdown</h4>
                    <div id="probabilityBars"></div>
                </div>
            </div>

            <div class="error-card" id="errorMessage">
                <i class="fas fa-exclamation-circle"></i>
                <span class="error-text"></span>
            </div>

            <div class="disclaimer-card">
                <i class="fas fa-shield-alt"></i>
                <strong>Important Medical Disclaimer:</strong> This AI-powered tool provides risk assessment based on laboratory values and biomarkers for educational purposes only. Results should not replace professional medical consultation, diagnosis, or treatment. Always consult with qualified healthcare professionals for medical decisions and proper clinical interpretation of your health data.
            </div>
        </div>
    </div>

    <script>
        // Add focus effects to input cards
        document.querySelectorAll('.input-card input').forEach(input => {
            input.addEventListener('focus', function() {
                this.closest('.input-card').classList.add('focused');
            });
            
            input.addEventListener('blur', function() {
                this.closest('.input-card').classList.remove('focused');
            });
        });

        document.getElementById("predictionForm").addEventListener("submit", async function(event) {
            event.preventDefault();
            
            const button = event.target.querySelector('.submit-button');
            const spinner = button.querySelector('.loading-spinner');
            const btnText = button.querySelector('.btn-text');
            const resultContainer = document.getElementById('resultContainer');
            const errorMessage = document.getElementById('errorMessage');
            
            // Show loading state
            button.classList.add('loading');
            spinner.style.display = 'inline-block';
            btnText.innerHTML = '<i class="fas fa-cog fa-spin"></i> Processing Analysis...';
            
            // Hide previous results
            resultContainer.style.display = 'none';
            errorMessage.style.display = 'none';
            
            const formData = new FormData(event.target);
            const data = {};
            
            formData.forEach((value, key) => {
                data[key] = parseFloat(value);
            });

            try {
                const response = await fetch('/predict', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();
                
                if (response.ok && !result.error) {
                    showResult(result);
                } else {
                    throw new Error(result.error || 'Analysis failed');
                }
            } catch (error) {
                showError('Unable to complete risk analysis. Please verify all input values are within normal ranges and try again.');
            } finally {
                // Reset button state
                button.classList.remove('loading');
                spinner.style.display = 'none';
                btnText.innerHTML = '<i class="fas fa-brain"></i> Analyze Health Profile';
            }
        });

        function showResult(result) {
            const resultContainer = document.getElementById('resultContainer');
            const resultIcon = resultContainer.querySelector('.result-icon');
            const resultTitle = resultContainer.querySelector('.result-title');
            const resultContent = resultContainer.querySelector('.results-content');
            const probabilityBars = document.getElementById('probabilityBars');
            
            const predictedClass = result.predicted_class;
            const probabilities = result.class_probabilities;
            
            // Clear previous classes
            resultContainer.className = 'results-card';
            
            let riskLevel, icon, message, advice;
            
            if (predictedClass === 0) {
                riskLevel = 'Low Risk Profile';
                icon = 'fas fa-check-circle';
                resultContainer.classList.add('results-low');
                message = 'Your health parameters indicate a low probability of diabetes development. Your metabolic indicators are within favorable ranges.';
                advice = 'Continue maintaining your healthy lifestyle with regular exercise, balanced nutrition, and routine health monitoring to preserve your low-risk status.';
            } else if (predictedClass === 1) {
                riskLevel = 'Moderate Risk Profile';
                icon = 'fas fa-exclamation-triangle';
                resultContainer.classList.add('results-moderate');
                message = 'Your analysis reveals moderate risk factors that warrant attention and proactive health management.';
                advice = 'Consider lifestyle modifications and schedule a comprehensive evaluation with your healthcare provider for personalized risk reduction strategies.';
            } else {
                riskLevel = 'High Risk Profile';
                icon = 'fas fa-exclamation-circle';
                resultContainer.classList.add('results-high');
                message = 'Your health parameters indicate elevated risk factors requiring immediate medical attention and intervention.';
                advice = 'Please consult with an endocrinologist or your primary care physician promptly for comprehensive evaluation, monitoring, and treatment planning.';
            }
            
            resultIcon.className = `result-icon ${icon}`;
            resultTitle.textContent = riskLevel;
            resultContent.innerHTML = `
                <p style="font-size: 1.1rem; margin-bottom: 16px;"><strong>Assessment Result:</strong> ${message}</p>
                <p style="font